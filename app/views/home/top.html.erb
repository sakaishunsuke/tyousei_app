<%= javascript_pack_tag 'custom/html_click' %>

<header>
  <div class="header-logo">
    日程調整サイト
  </div>
  <ul class="header-menus">
    <li></li>
  </ul>
</header>

<div class="main top-main">
  <div class="top-message">
    <!--<h2>カレンダーを使った簡単日程調整！</h2>-->
    <p>参加できそうな日をクリック、名前を入力して保存してね</p>
  </div>
  
  <div>
    <table class="calendar" border="0" cellpadding="2" cellspacing="1" bgcolor="#333333" width="" >
      <tr align="center" bgcolor="#FFFFFF">
      <td colspan="7">2021年6月</td>
      </tr>
      <tr align="center" bgcolor="#CCCCCC">
        <td bgcolor="#FF6666">日</td>
        <td>月</td>
        <td>火</td>
        <td>水</td>
        <td>木</td>
        <td>金</td>
        <td bgcolor="#FF6666">土</td>
      </tr>
      
      <!--カレンダーの自動生成-->
      <!--カレンダーの最初に何日分空日を入れたいかpresetに入れる-->
      <% @date_preset = 2%>
      <% @date_count = 1 - @date_preset %>
      <% while @date_count < 31 do %>
        <tr align="center" bgcolor="#FFFFFF">
          <% 7.times do %>
            <% if @date_count < 1  || @date_count >= 31%>
              <td></td>
            <% else %>
              <!--参加者がいれば人数と名前を表示-->
              <% if @date_map.key?(@date_count.to_s) %>
                <td id="date-masu-<%= @date_count %>"><%= @date_count %> <br><%= @date_map[@date_count.to_s].length %>人</td>
              <% else %>
                <!--日付だけ入れる-->
                <td id="date-masu-<%= @date_count %>"><%= @date_count %></td>
              <% end %>
            <% end %>
            <% @date_count += 1 %>
          <% end %>
        </tr>
      <% end %>
      <!--カレンダーの自動生成　ここまで-->
      
      
    </table>
    
    <div class="input-div" >
      <p>名前</p>
      <%= form_tag("home/create") do %>
        <!--名前の入力フィーム-->
        <input class="form-input" id="form-input" type="text" name="username" size="15" maxlength="20" required>
        
        <!--登録データの一覧を確認するフォーム（非表示）-->
        <textarea hidden  cols=10 ><%= @date_map_name_s %></textarea>
        <!--日付を記録するフォーム（非表示）-->
        <textarea hidden name="date" class="textarea_date"></textarea>
        <!--登録ボタン-->
        <input class="btn type02" type='submit' value="保存">
      <% end %>
    </div>
    
    <!--投稿者リスト（トグルボタンで選択可能）-->
    <div class="user-list-div">
      <p>参加者リスト！</p>
      <p class="hosoku">名前をクリックすることで、その人の日程を表示できます</p>
      <!--投稿者が居たら、リストを作成する-->
      <% if @user_list.length > 0  %>
        <% @user_list.each do |user|  %>
          <div class="" >
            <label  class="user_list">
              <input type="radio" name="radio" value="1" />
              <span class="m-form-radio-name">
                  <span class="m-form-radio-text"><%= user %></span>
              </span>
            </label>
          </div>
        <% end %>
      <% end %>
    </div>


  </div>
  
  
</div>

